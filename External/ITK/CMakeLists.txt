set(BUILD_EXAMPLES OFF CACHE BOOL)

# Sorry, but apparently ITK cannot figure out how to download test data.
set(BUILD_TESTING ${BUILD_TESTING} CACHE BOOL)

set(ITK_BUILD_DEFAULT_MODULES OFF CACHE BOOL)
set(Module_ITKReview ON CACHE BOOL)
set(ITK_WRAPPING OFF CACHE BOOL)
# set(ITKV4_COMPATIBILITY ON CACHE BOOL)
set(Module_ITKVtkGlue OFF CACHE BOOL)

# DCMTK
if(USE_DCMTK)
  set(ITK_USE_SYSTEM_DCMTK ON CACHE BOOL)
  set(DCMTK_DIR "${DCMTK_BINARY_DIR}/../" CACHE PATH)
else()
  set(Module_ITKDCMTK ON CACHE BOOL)
  set(ITK_USE_SYSTEM_DCMTK OFF CACHE BOOL)
endif()

# ZLIB
if(WIN32)
  set(ITK_USE_SYSTEM_ZLIB OFF CACHE BOOL)
else()
  set(ITK_USE_SYSTEM_ZLIB ON CACHE BOOL)
endif()

# GDCM
if(NOT WIN32)
  set(ITK_USE_SYSTEM_GDCM OFF CACHE BOOL)
else()
  set(ITK_USE_SYSTEM_GDCM ON CACHE BOOL)
endif()

# RTK and DCMTK
# set(Module_ITKIODCMTK ON CACHE BOOL)
set(Module_RTK ON CACHE BOOL)
set(RTK_BUILD_APPLICATIONS OFF CACHE BOOL)

# FFTW
set(ITK_USE_FFTWF ${FFTW_FOUND} CACHE BOOL)
set(ITK_USE_FFTWD ${FFTW_FOUND} CACHE BOOL)
set(ITK_USE_SYSTEM_FFTW ${FFTW_FOUND} CACHE BOOL)
set(FFTWD_LIB ${FFTW_LIBRARY_DOUBLE} CACHE FILEPATH)
set(FFTWF_LIB ${FFTW_LIBRARY_FLOAT} CACHE FILEPATH)
set(FFTWD_THREADS_LIB ${FFTW_THREADS_LIBRARY_DOUBLE} CACHE FILEPATH)
set(FFTWF_THREADS_LIB ${FFTW_THREADS_LIBRARY_FLOAT} CACHE FILEPATH)
set(FFTW_INCLUDE_DIR ${FFTW_INCLUDE_DIR} CACHE PATH)
set(FFTW_INCLUDE_PATH ${FFTW_INCLUDE_DIR} CACHE PATH)

# GPU
set(ITK_USE_GPU ON CACHE BOOL)
set(OPENCL_INCLUDE_DIRS ${OpenCL_INCLUDE_DIR} CACHE PATH)
set(OPENCL_LIBRARIES ${OpenCL_LIBRARY} CACHE FILEPATH)

# CUDA
set(CUDA_HAVE_GPU ${USE_CUDA} CACHE BOOL)
set(CUDA_SEPARABLE_COMPILATION OFF CACHE BOOL)

set_directory_properties(PROPERTIES EXCLUDE_FROM_ALL YES)
FetchContent_MakeAvailable(ITK)
